<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IEEE MIPR 2020 - Upload Files</title>
</head>
<body>
    <div>
        <br/>
        <br/>
{#        <img src="../static/logo.png" align="left" />#}
{#        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>#}
        <h2 style="font-family:arial;color:#3170a7;font-size:36px;"> The IEEE MIPR 2020 recordings upload page </h2>
        <br/>
        <form name="mipr_form" enctype='multipart/form-data' action ='/upload_files' method='post'>
            <p align="left"><span style="color:red">*</span><span style="font-family:arial;color:steelblue;font-size:18px;"> Please input your first name: </span>
            <input type="text"  rows="4" cols="60" placeholder=""
                   name='name' style="height:20px;width:480px;" required/></p>

            <p align="left"><span style="color:red">*</span><span style="font-family:arial;color:steelblue;font-size:18px;"> Please input your paper ID (Please refer to the ID on the CMT system): </span>
            <input type="text"  rows="4" cols="60" placeholder=""
                   name='paperid' style="height:20px;width:480px;" required/></p>

            <p align="left"><span style="color:red">*</span><span style="font-family:arial;color:steelblue;font-size:18px;"> Please select your pre-recorded video file (.mp4): </span>
{#            <input type="file"  rows="4" cols="60" placeholder=""#}
{#                   name='video' style="display:none" required/>#}
{#            <input name="path_mp4" readonly />#}
{#            <input type="button" value="Browse" onclick="document.mipr_form.video.click()" /></p>#}
            <input type="file"  rows="4" cols="60" placeholder=""
                   name='video' style="color:black" required accept=".mp4" id="upload-video" onchange="checkSize(this);"/>

            <br/><p align="left"><span style="color:red">*</span><span style="font-family:arial;color:steelblue;font-size:18px;"> Please select your slides file (.pdf): </span>
{#            <input type="file"  rows="4" cols="60" placeholder=""#}
{#                   name='slides' style="display:none" required/>#}
{#            <input name="path_pdf" readonly />#}
{#            <input type="button" value="Browse" onclick="document.mipr_form.slides.click()" /></p>#}
            <input type="file"  rows="4" cols="60" placeholder=""
                   name='slides' style="color:black" required accept=".pdf" id="upload-slides" onchange="checkSize(this);"/>

            <script>
                function checkSize(target) {
                    let fileSize = (target.files[0].size / 1024 / 1024).toFixed(1);
                    console.log(fileSize);
                    let fileName = target.value;
                    let fileType = fileName.substring(fileName.lastIndexOf(".")+1).toLowerCase();
                    if (fileType === "mp4" && fileSize > 150) {
                        alert('Limited file size: 150m!');
                        target.value = "";
                        return false
                    }
                    if (fileType === "pdf" && fileSize > 20) {
                        alert('Limited file size: 20m!');
                        target.value = "";
                        return false
                    }
                }

                function showInfo() {
                    document.getElementById("show-info").innerHTML = "Uploading..."
                }
            </script>

            <br/><br/>
            <p align="left"><button type="submit" class="search-submit" style="height:35px;width:100px;" onclick="showInfo();"> Upload </button></p>
        </form>
        <h3 id="show-info" style="font-family:arial;color:#c04851;font-size:28px;">{{ tips }}</h3>
    </div>
</body>
</html>